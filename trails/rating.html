<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>

<div id="ratingTest" data-trail="if"></div>
<div id="ratingSecond" data-trail="lv"></div>


<script>


	var drawRatingInElement = document.getElementById('ratingTest');
	rating(drawRatingInElement, 1);

	var Element2222 = document.getElementById('ratingSecond');
	rating(Element2222, 1);

	

	function rating(ratingEl, defaultRating ) {
		var stars = 1;
		ratingEl.addEventListener("click", doRating, false);

		function drawStars (ratedStars) {
			for (var i = 0; i <defaultRating; i++) {
				var rate = document.createElement('div');
				rate.className = ('rated');	
				rate.setAttribute('data-rating', stars++);	
				ratingEl.appendChild(rate);
			}
		
			for (var i = 0; i <  5 - defaultRating; i++) {
				var unrate = document.createElement('div');
				unrate.className = ('unrated');	
				unrate.setAttribute('data-rating', stars++);
				ratingEl.appendChild(unrate);
			}
		}

		function doRating(e) {
			var rating = e.target.getAttribute("data-rating");
			var trailId = ratingEl.getAttribute('data-trail');
				
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
				if (xhttp.readyState == 4 && xhttp.status == 201){
					// ***
					rating();
				}
			}
			
			xhttp.open("POST", "rating");
			xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			xhttp.send("rating=3&trailId=uiii");
		};


	};  

	function sendRequest (trailId, dataRating) {
		
		
	};
</script>

<style type="text/css">
	.rated {
		display: inline-block;
		margin-right: 2px;
		width: 10px;
		height: 10px;
		background-color: red; 
	}

	.unrated {
		margin-right: 2px;
		display: inline-block;
		width: 10px;
		height: 10px;
		background-color: #71A865; 
	}
</style>

</body>
</html>